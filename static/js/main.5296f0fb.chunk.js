(this.webpackJsonppetstore=this.webpackJsonppetstore||[]).push([[0],{108:function(e,t,n){},109:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n(1),r=n.n(s),c=n(92),i=n.n(c),o=n(217),l=n(100),d=(n(108),n(109),n(13)),u=n.n(d),h=n(28),p=n(12),j=n(38),b="Success",O="http://cors-anywhere.herokuapp.com/ec2-15-207-87-105.ap-south-1.compute.amazonaws.com";function m(e){return x.apply(this,arguments)}function x(){return(x=Object(h.a)(u.a.mark((function e(t){var n,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(O,"/api/user/send_otp"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:"+91".concat(t)})});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,s=a.message===b,e.abrupt("return",Object(j.a)(Object(j.a)({},a),{},{success:s}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return f.apply(this,arguments)}function f(){return(f=Object(h.a)(u.a.mark((function e(t,n){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(O,"/api/user/validate_otp"),{method:"POST",body:JSON.stringify({phone:"+91".concat(t),otp:n}),headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return s=e.sent,e.abrupt("return",Object(j.a)(Object(j.a)({},s),{},{success:s.match}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=n(36),g=n(52),y=n(49),P=n.n(y),S=N.b({phone:N.a().typeError("Invalid Phone No").integer("Invalid Phone No").required("Phone No is required").min(1e9,"Invalid Phone No").max(9999999999,"Invalid Phone no")});function T(e){var t=e.onSendOTPButtonClicked,n=Object(g.a)({onSubmit:t,validateOnBlur:!0,validationSchema:S,initialValues:{phone:""}});return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"field",style:{marginBottom:"0"},children:Object(a.jsx)("label",{className:"label",children:"Phone No."})}),Object(a.jsxs)("div",{className:"field has-addons",children:[Object(a.jsx)("div",{className:"control",children:Object(a.jsx)("button",{className:"button is-static",children:"+91"})}),Object(a.jsx)("div",{className:"control is-expanded",children:Object(a.jsx)("input",{type:"text",onChange:n.handleChange,name:"phone",value:n.values.phone,onBlur:n.handleBlur,placeholder:"Phone No",className:"input"})})]}),n.errors.phone&&Object(a.jsx)("div",{className:"field",style:{marginTop:"-0.75rem"},children:Object(a.jsx)("p",{className:"help is-danger",children:n.errors.phone})}),Object(a.jsx)("div",{className:"field is-grouped is-grouped-right",children:Object(a.jsx)("div",{className:"control",children:Object(a.jsx)("button",{type:"button",disabled:!n.dirty||!P.a.isEmpty(n.errors)||n.isSubmitting,className:"button is-primary",onClick:n.handleSubmit,children:"Send OTP"})})})]})}var k=S.shape({otp:N.a().typeError("OTP should be a number").integer("Invalid OTP").required("OTP is required")});function C(e){var t=e.validateOtpFormInitialValue,n=e.onValidateOTPButtonClicked,s=Object(g.a)({onSubmit:n,validateOnBlur:!0,validationSchema:k,initialValues:t});return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"field",style:{marginBottom:"0"},children:Object(a.jsx)("label",{className:"label",children:"Phone No."})}),Object(a.jsxs)("div",{className:"field has-addons",children:[Object(a.jsx)("div",{className:"control",children:Object(a.jsx)("button",{className:"button is-static",children:"+91"})}),Object(a.jsx)("div",{className:"control is-expanded",children:Object(a.jsx)("input",{type:"text",onChange:s.handleChange,name:"phone",value:s.values.phone,onBlur:s.handleBlur,placeholder:"Phone No",className:"input",disabled:!0})})]}),s.errors.phone&&Object(a.jsx)("div",{className:"field",style:{marginTop:"-0.75rem"},children:Object(a.jsx)("p",{className:"help is-danger",children:s.errors.phone})}),Object(a.jsxs)("div",{className:"field",children:[Object(a.jsx)("label",{className:"label",children:"OTP"}),Object(a.jsx)("div",{className:"control is-expanded",children:Object(a.jsx)("input",{type:"text",name:"otp",value:s.values.otp,onChange:s.handleChange,onBlur:s.handleBlur,placeholder:"OTP",className:"input"})}),s.errors.otp&&Object(a.jsx)("p",{className:"help is-danger",children:s.errors.otp})]}),Object(a.jsx)("div",{className:"field is-grouped is-grouped-right",children:Object(a.jsx)("div",{className:"control",children:Object(a.jsx)("button",{type:"button",disabled:!s.dirty||!P.a.isEmpty(s.errors)||s.isSubmitting,className:"button is-primary",onClick:s.handleSubmit,children:"Validate OTP"})})})]})}var B="SEND_OTP",w="VALIDATE_OTP";function F(e){var t=e.children,n=Object(s.useState)(!1),r=Object(p.a)(n,2),c=r[0],i=r[1],o=Object(s.useState)(B),l=Object(p.a)(o,2),d=l[0],j=l[1],b=Object(s.useState)({phone:"",otp:""}),O=Object(p.a)(b,2),x=O[0],f=O[1],N=Object(s.useState)(null),g=Object(p.a)(N,2),y=g[0],P=g[1],S=Object(s.useCallback)(function(){var e=Object(h.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m(t.phone);case 3:(a=e.sent).success?(f({phone:t.phone,otp:""}),j(w)):n.setFieldError("phone",a.message),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),P("Sending OTP failed");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),[f,P,j]),k=Object(s.useCallback)(function(){var e=Object(h.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(t.phone,t.otp);case 3:(a=e.sent).success?i(!0):n.setFieldError("otp",a.message),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),P("Validating OTP failed");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),[]);return c?Object(a.jsx)(a.Fragment,{children:t}):Object(a.jsx)("div",{className:"container is-max-desktop",children:Object(a.jsxs)("div",{className:"tile is-ancestor",children:[Object(a.jsx)("div",{className:"tile is-3"}),Object(a.jsx)("div",{className:"tile is-6",children:Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("div",{className:"box",children:[d===B?Object(a.jsx)(T,{onSendOTPButtonClicked:S}):Object(a.jsx)(C,{validateOtpFormInitialValue:x,onValidateOTPButtonClicked:k}),y&&Object(a.jsx)("div",{className:"notification is-danger",children:y})]})})}),Object(a.jsx)("div",{className:"title is-3"})]})})}var I=function(){return Object(a.jsx)(F,{children:"got into the app"})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,218)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};o.a({dsn:"https://90f08963d9ff4919b0fdd357df42285c@o492546.ingest.sentry.io/5560045",autoSessionTracking:!0,integrations:[new l.a.BrowserTracing],tracesSampleRate:1}),i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(I,{})}),document.getElementById("root")),E()}},[[212,1,2]]]);
//# sourceMappingURL=main.5296f0fb.chunk.js.map